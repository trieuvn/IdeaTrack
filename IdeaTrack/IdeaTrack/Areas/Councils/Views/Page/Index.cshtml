@model IdeaTrack.Areas.Councils.Models.DashboardVM

@{
    ViewData["Title"] = "Council Workspace";
}

<div class="container-fluid py-4">
    <div class="row">
        <!-- Sidebar/Stats -->
        <div class="col-md-3">
            <div class="card border-0 shadow-sm rounded-4 mb-4 text-white bg-dark">
                <div class="card-body p-4">
                     <h4 class="fw-bold mb-1">Council Workspace</h4>
                     <p class="opacity-75 small">Review assigned initiatives</p>
                     
                     <hr class="border-secondary" />
                     
                     <div class="d-flex justify-content-between mb-2">
                         <span>Pending</span>
                         <span class="badge bg-warning text-dark">@Model.PendingCount</span>
                     </div>
                     <div class="d-flex justify-content-between">
                         <span>Completed</span>
                         <span class="badge bg-success">@Model.CompletedCount</span>
                     </div>
                </div>
            </div>
            
            <div class="card border-0 shadow-sm rounded-4 mb-4">
                <div class="card-header bg-white border-0 fw-bold py-3">
                    Recent Activity
                </div>
                <div class="list-group list-group-flush">
                    @if (Model.RecentActivityList != null && Model.RecentActivityList.Any())
                    {
                        @foreach (var act in Model.RecentActivityList)
                        {
                            <div class="list-group-item">
                                <small class="text-muted d-block">@act.Timestamp.ToString("dd/MM HH:mm")</small>
                                <span>@act.Description</span>
                            </div>
                        }
                    }
                    else
                    {
                        <div class="p-3 text-muted small">No recent activity</div>
                    }
                </div>
            </div>
        </div>

        <!-- Main List -->
        <div class="col-md-9">
             <h4 class="fw-bold mb-4">Assigned Initiatives</h4>
             
             @if (Model.Assignments != null && Model.Assignments.Any())
             {
                 <div class="row g-4">
                     @foreach (var item in Model.Assignments)
                     {
                         <div class="col-md-6 col-lg-4">
                             <div class="card h-100 border-0 shadow-sm rounded-4 initiative-card">
                                 <div class="card-body p-4 d-flex flex-column">
                                     <div class="mb-3">
                                         <span class="badge bg-light text-primary border border-primary mb-2">@item.CategoryName</span>
                                         <h5 class="fw-bold line-clamp-2">@item.Title</h5>
                                         <small class="text-muted">Code: @item.InitiativeCode</small>
                                     </div>
                                     
                                     <div class="mt-auto pt-3 border-top">
                                         <div class="d-flex justify-content-between align-items-center mb-3">
                                             <small class="text-muted">Assigned @item.TimeAgo</small>
                                         </div>
                                         <a href="/Councils/Page/Details/@item.AssignmentId" class="btn btn-primary w-100 rounded-pill">
                                             Start Review
                                         </a>
                                     </div>
                                 </div>
                             </div>
                         </div>
                     }
                 </div>
             }
             else
             {
                 <div class="text-center py-5">
                     <img src="/images/empty_state.svg" style="height: 150px; opacity: 0.5" class="mb-3" />
                     <h5 class="text-muted">You're all caught up!</h5>
                     <p class="text-muted small">No pending initiatives assigned to you.</p>
                 </div>
             }
        </div>
    </div>
</div>
